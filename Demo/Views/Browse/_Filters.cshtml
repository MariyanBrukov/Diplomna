@model BrowseIndexVm

<form method="get" asp-action="Index">
    <input type="hidden" name="partType" value="@(Model.Filter.PartType ?? Demo.Models.PartType.CPU)" />

    <div class="mb-3">
        <label class="form-label">Min Price</label>
        <input class="form-control" type="number" step="0.01" name="minPrice" value="@Model.Filter.MinPrice" />
    </div>

    <div class="mb-3">
        <label class="form-label">Max Price</label>
        <input class="form-control" type="number" step="0.01" name="maxPrice" value="@Model.Filter.MaxPrice" />
    </div>

    <div class="mb-3">
        <label class="form-label">Brand</label>
        <select class="form-select" name="brand">
            <option value="">All</option>
            @foreach (var opt in Model.BrandOptions)
            {
                var selected = (opt.Value == Model.Filter.Brand) ? "selected" : null;
                <option value="@opt.Value" selected="@selected">@opt.Text</option>
            }
        </select>
    </div>

    <hr />

    <!-- Capability filters: show based on selected type -->
    @{
        var pt = Model.Filter.PartType ?? Demo.Models.PartType.CPU;
    }

    @if (pt == Demo.Models.PartType.CPU)
    {
        <div class="mb-3">
            <label class="form-label">Socket</label>
            <input class="form-control" name="socket" value="@Model.Filter.Socket" placeholder="e.g. AM5, LGA1700" />
        </div>
        <div class="mb-3">
            <label class="form-label">Min Cores</label>
            <input class="form-control" type="number" name="coresMin" value="@Model.Filter.CoresMin" />
        </div>
    }
    else if (pt == Demo.Models.PartType.GPU)
    {
        <div class="mb-3">
            <label class="form-label">Min VRAM (GB)</label>
            <input class="form-control" type="number" name="memoryGBMin" value="@Model.Filter.MemoryGBMin" />
        </div>
        <div class="mb-3">
            <label class="form-label">Chipset (contains)</label>
            <input class="form-control" name="chipset" value="@Model.Filter.Chipset" placeholder="e.g. RDNA, Ada" />
        </div>
    }
    else if (pt == Demo.Models.PartType.RAM)
    {
        <div class="mb-3">
            <label class="form-label">Min Capacity (GB)</label>
            <input class="form-control" type="number" name="capacityGBMin" value="@Model.Filter.CapacityGBMin" />
        </div>
        <div class="mb-3">
            <label class="form-label">RAM Type</label>
            <input class="form-control" name="ramType" value="@Model.Filter.RamType" placeholder="DDR4 / DDR5" />
        </div>
        <div class="mb-3">
            <label class="form-label">Min Speed (MHz)</label>
            <input class="form-control" type="number" name="speedMHzMin" value="@Model.Filter.SpeedMHzMin" />
        </div>
    }
    else if (pt == Demo.Models.PartType.Motherboard)
    {
        <div class="mb-3">
            <label class="form-label">Socket</label>
            <input class="form-control" name="socket" value="@Model.Filter.Socket" placeholder="e.g. AM5, LGA1700" />
        </div>
        <div class="mb-3">
            <label class="form-label">Form Factor</label>
            <input class="form-control" name="formFactor" value="@Model.Filter.FormFactor" placeholder="ATX, Micro-ATX" />
        </div>
    }
    else if (pt == Demo.Models.PartType.PowerSupply)
    {
        <div class="mb-3">
            <label class="form-label">Min Wattage</label>
            <input class="form-control" type="number" name="wattageMin" value="@Model.Filter.WattageMin" />
        </div>
        <div class="mb-3">
            <label class="form-label">Efficiency</label>
            <input class="form-control" name="efficiency" value="@Model.Filter.Efficiency" placeholder="80+ Gold" />
        </div>
    }
    else if (pt == Demo.Models.PartType.Storage)
    {
        <div class="mb-3">
            <label class="form-label">Storage Type</label>
            <input class="form-control" name="storageType" value="@Model.Filter.StorageType" placeholder="NVMe SSD / SSD / HDD" />
        </div>
        <div class="mb-3">
            <label class="form-label">Min Capacity (GB)</label>
            <input class="form-control" type="number" name="capacityGBMin" value="@Model.Filter.CapacityGBMin" />
        </div>
    }
    else if (pt == Demo.Models.PartType.Case)
    {
        <div class="mb-3">
            <label class="form-label">Form Factor</label>
            <input class="form-control" name="formFactor" value="@Model.Filter.FormFactor" placeholder="ATX, Mini-ITX" />
        </div>
        <div class="mb-3">
            <label class="form-label">Color</label>
            <input class="form-control" name="color" value="@Model.Filter.Color" placeholder="Black, White" />
        </div>
    }

    <div class="d-grid gap-2 mt-3">
        <button type="submit" class="btn btn-primary">Apply</button>

        <a class="btn btn-outline-secondary"
           asp-action="Index"
           asp-route-partType="@(Model.Filter.PartType ?? Demo.Models.PartType.CPU)">
            Reset
        </a>
    </div>
</form>
